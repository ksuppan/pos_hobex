<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="HobexDetails" owl="1">
        <div t-if="line.hobex_tid">
            <span class="pos-receipt-left-align">TID</span>
            <span class="pos-receipt-right-align"><t t-out="line.hobex_tid"/></span>
        </div>

        <div t-if="line.hobex_receipt">
            <span class="pos-receipt-left-align">Beleg#</span>
            <span class="pos-receipt-right-align"><t t-out="line.hobex_receipt"/></span>
        </div>

        <div t-if="line.hobex_cardIssuer">
            <span class="pos-receipt-left-align">Karte</span>
            <span class="pos-receipt-right-align"><t t-out="line.hobex_cardIssuer"/></span>
        </div>

        <div t-if="line.hobex_cardNumber">
            <span class="pos-receipt-left-align">PAN</span>
            <span class="pos-receipt-right-align"><t t-out="line.hobex_cardNumber"/></span>
        </div>

        <div style="width:100%;border-bottom:1px dotted;"/>

        <div t-if="line.hobex_transactionType == 'SELL'">
            <span class="pos-receipt-left-align">KAUF</span>
            <span class="pos-receipt-right-align"><t t-out="formatCurrency(line.amount)"/></span>
        </div>

        <div t-if="line.hobex_transactionType == 'VOID'">
            <span class="pos-receipt-left-align">STORNO</span>
            <span class="pos-receipt-right-align"><t t-out="formatCurrency(line.amount)"/></span>
        </div>

        <div style="width:100%;border-bottom:1px dotted;"/>

        <div t-if="line.hobex_approvalCode">
            <span class="pos-receipt-left-align">Autorisierungscode</span>
            <span class="pos-receipt-right-align"><t t-out="line.hobex_approvalCode"/></span>
        </div>

        <div t-if="line.hobex_aid">
            <span class="pos-receipt-left-align">AID</span>
            <span class="pos-receipt-right-align"><t t-out="line.hobex_aid"/></span>
        </div>

        <div t-if="line.hobex_approvalCode">
            <span class="pos-receipt-left-align">RC: <t t-out="line.hobex_responseCode"/></span>
            <span class="pos-receipt-right-align"><t t-out="line.hobex_responseText"/></span>
        </div>

        <div t-if="line.hobex_actionCode">
            <span class="pos-receipt-left-align">Crypto</span>
            <span class="pos-receipt-right-align"><t t-out="line.hobex_actionCode"/></span>
        </div>

        <t t-if="line.hobex_cvm == 1">
            <div style="text-align:center;">Unterschrift</div>
            <div style="width:100%;border-bottom:1px dotted;"/>
            <div style="text-align:center;height:2cm;"></div>
        </t>
    </t>

    <t t-name="HobexSignReceipt" owl="1">
        <div class="pos-receipt">
            <div style="width:100%;border-bottom:1px dotted;"/>
            <div>
                <span class="pos-receipt-left-align"><t t-out="transactionDate"/></span>
                <span class="pos-receipt-right-align"><t t-out="transactionTime"/></span>
            </div>

            <div>HÃ„NDLERBELEG</div>
            <t t-call="HobexDetails"/>
            <div style="width:100%;border-bottom:1px dotted;"/>
        </div>
    </t>

    <t t-name="OrderReceipt"
       t-inherit="point_of_sale.OrderReceipt"
       t-inherit-mode="extension"
       owl="1">

        <xpath expr="//div[hasclass('before-footer')]" position="after">
            <!-- Odoo 19: OrderReceipt exposes `paymentLines` (derived from order.payment_ids) -->
            <t t-foreach="paymentLines" t-as="line" t-key="line.uuid">
                <t t-if="line.payment_method_id and line.payment_method_id.use_payment_terminal == 'hobex'">
                    <t t-if="line.hobex_transactionId or line.hobex_tid or line.hobex_receipt">
                        <div style="width:100%;border-bottom:1px dotted;"/>
                        <div style="text-align:center;">hobex</div>
                        <t t-call="HobexDetails"/>
                        <div style="width:100%;border-bottom:1px dotted;"/>
                    </t>
                </t>
            </t>
        </xpath>

    </t>

</templates>
